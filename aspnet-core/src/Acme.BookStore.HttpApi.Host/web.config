<?xml version="1.0" encoding="utf-8"?>
<configuration>
	<location path="." inheritInChildApplications="false">
		<system.webServer>
			<handlers>
				<add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
			</handlers>
			<aspNetCore processPath="dotnet" arguments=".\Acme.BookStore.HttpApi.Host.dll" stdoutLogEnabled="false" stdoutLogFile=".\Logs\stdout" hostingModel="inprocess">
				<!-- ✅ Allow requests from HTTP -->
				<environmentVariables>
					<environmentVariable name="ASPNETCORE_URLS" value="http://0.0.0.0:5000" />
				</environmentVariables>
			</aspNetCore>
		</system.webServer>
	</location>

	<system.webServer>
		<httpProtocol>
			<customHeaders>
				<remove name="x-powered-by" />
			</customHeaders>
		</httpProtocol>

		<!-- ✅ Disable HTTPS redirection (if applicable) -->
		<rewrite>
			<rules>
				<rule name="Remove HTTPS Redirection" stopProcessing="true">
					<match url="(.*)" />
					<action type="Rewrite" url="{R:1}" />
				</rule>
			</rules>
		</rewrite>
	</system.webServer>
</configuration>
